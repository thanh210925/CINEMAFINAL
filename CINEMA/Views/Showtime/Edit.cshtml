@model CINEMA.Models.Showtime
@{
    ViewData["Title"] = "Sửa lịch chiếu";
    Layout = "_AdminLayout";
    var movies = ViewBag.Movies as List<CINEMA.Models.Movie>;
    var auditoriums = ViewBag.Auditoriums as List<CINEMA.Models.Auditorium>;
}

<div class="container mt-4">
    <h2>✏️ Sửa lịch chiếu</h2>
    <form asp-action="Edit" method="post" class="mt-3">
        <input type="hidden" asp-for="ShowtimeId" />

        <div class="mb-3">
            <label class="form-label">Phim</label>
            <select class="form-select" asp-for="MovieId">
                @foreach (var m in movies)
                {
                    <option value="@m.MovieId" selected="@(m.MovieId == Model.MovieId)">
                        @m.Title
                    </option>
                }
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Rạp</label>
            <select class="form-select" asp-for="AuditoriumId">
                @foreach (var r in auditoriums)
                {
                    <option value="@r.AuditoriumId" selected="@(r.AuditoriumId == Model.AuditoriumId)">
                        @r.Name
                    </option>
                }
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Ngày giờ bắt đầu</label>
            <input type="datetime-local" class="form-control"
                   asp-for="StartTime" value="@Model.StartTime?.ToString("yyyy-MM-ddTHH:mm")" />
        </div>

        <div class="mb-3">
            <label class="form-label">Ngày giờ kết thúc</label>
            <input type="datetime-local" class="form-control"
                   asp-for="EndTime" value="@Model.EndTime?.ToString("yyyy-MM-ddTHH:mm")" />
        </div>

        <div class="mb-3">
            <label class="form-label">Giá vé cơ bản</label>
            <input type="number" class="form-control" asp-for="BasePrice" />
        </div>

        <div class="mb-3">
            <label class="form-label">Ngôn ngữ</label>
            <input type="text" class="form-control" asp-for="Language" />
        </div>

        <div class="form-check mb-3">
            <input type="checkbox" class="form-check-input"
                   name="IsActive" value="true" @(Model?.IsActive == true ? "checked" : "") />
            <input type="hidden" name="IsActive" value="false" />
            <label class="form-check-label">Đang chiếu</label>
        </div>

        <button type="submit" class="btn btn-success">💾 Lưu thay đổi</button>
        <a asp-action="Index" class="btn btn-secondary">⬅ Quay lại</a>
    </form>
</div>
